<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Buscador</title>
    <style>
        body { background: #050505; color: #fff; font-family: sans-serif; padding: 40px; overflow: hidden; }
        input { width: 100%; background: #111; border: 3px solid #333; color: #fff; padding: 15px; font-size: 1.5rem; border-radius: 5px; }
        input:focus { border-color: #e50914; outline: none; }
        .res { display: flex; gap: 15px; margin-top: 30px; transition: 0.3s; }
        .card { flex: 0 0 150px; aspect-ratio: 2/3; background: #111; border: 3px solid transparent; position: relative; }
        .card:focus { border-color: #fff; scale: 1.1; outline: none; }
        .card img { width: 100%; height: 100%; object-fit: cover; }
    </style>
</head>
<body>
    <input type="text" id="in" placeholder="Escribe el nombre y pulsa Enter..." autofocus>
    <div class="res" id="res"></div>
<script>
    const JS = "https://raw.githubusercontent.com/R3D-GHOST/json/refs/heads/main/data.json";
    let data = [];
    fetch(JS).then(r=>r.json()).then(j => data = j);

    document.getElementById('in').onkeydown = (e) => {
        if(e.key === 'Enter') {
            const q = e.target.value.toLowerCase();
            const filtered = data.filter(i => i.title.toLowerCase().includes(q));
            const container = document.getElementById('res');
            container.innerHTML = "";
            filtered.forEach((item, idx) => {
                const c = document.createElement('div');
                c.className='card'; c.tabIndex=0;
                c.innerHTML=`<img src="${item.coverImage||item.img}">`;
                c.onfocus = () => container.style.transform = `translateX(${-idx*165}px)`;
                c.onkeydown = (k) => {
                    if(k.key==='ArrowRight') container.children[idx+1]?.focus();
                    if(k.key==='ArrowLeft') container.children[idx-1]?.focus();
                    if(k.key==='ArrowUp') document.getElementById('in').focus();
                    if(k.key==='Enter') {
                        if(item.episodes) { localStorage.setItem("serie", JSON.stringify(item)); window.location.href="caps.html"; }
                        else window.location.href = item.video_url;
                    }
                };
                container.appendChild(c);
            });
        }
    };
</script>
</body>
</html>